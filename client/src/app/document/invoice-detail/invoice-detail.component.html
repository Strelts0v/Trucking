<div class="card-body">
  <mat-card-header class="card-header">
    <mat-icon mat-card-avatar class="card-header-icon">assignment</mat-icon>
    <mat-card-title>
      <span *ngIf="!id">New </span>
      Consignment Note
    </mat-card-title>
    <mat-card-subtitle>â„–{{id}}&emsp;{{invoice.status}}</mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    <div class="row">
      <div class="col-1">
        <mat-icon class="label-icon">person</mat-icon>
      </div>
      <div class="col-2">
        <mat-form-field floatPlaceholder="never">
          <mat-select [(ngModel)]="invoice.client" placeholder="Client" required>
            <mat-option *ngFor="let client of clients" [value]="client">{{client}}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>

    <div class="row">
      <div class="col-1">
        <mat-icon class="label-icon" svgIcon="package_variant"></mat-icon>
        <p>Consignment:</p>
      </div>
      <div class="col-2">
        <form [formGroup]="cForm">
          <table class="consignment-table" formArrayName="consignments">
            <thead>
            <tr>
              <th class="id-field">Product code</th>
              <th>Product name</th>
              <th>Amount</th>
              <th>Status</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let consignment of consignments.controls; index as i" [formGroupName]="i">
              <td>{{displayItemNumber(consignment.controls.item.value)}}</td>
              <td>
                <mat-form-field class="item-field">
                  <mat-select formControlName="item" [compareWith]="compareItem">
                    <mat-option *ngFor="let item of items" [value]="item">{{item.name}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </td>
              <td>
                <mat-form-field class="amount-field">
                  <input matInput type="number" min="0" formControlName="amount">
                  <span matSuffix>{{consignment.controls.item.value && consignment.controls.item.value.type}}</span>
                </mat-form-field>
              </td>
              <td>
                <mat-form-field class="status-field">
                  <mat-select formControlName="status">
                    <mat-option *ngFor="let status of getConsignmentStatuses()" [value]="status">{{status}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </td>
              <td>
                <div class="consignment-btn-row">
                  <button class="delete-btn" mat-icon-button (click)="deleteItem(i)" *ngIf="consignments.controls.length > 1">
                    <mat-icon>remove_circle</mat-icon>
                  </button>
                  <button class="add-btn" mat-icon-button (click)="addEmptyItem()" *ngIf="i === (consignments.controls.length - 1) && consignment.controls.item.value !== null">
                    <mat-icon>add_circle</mat-icon>
                  </button>
                </div>
              </td>
            </tr>
            </tbody>
          </table>
        </form>
      </div>
      <pre>{{cForm.value | json}}</pre>
    </div>

    <div>
      <b>Registered by:</b>     Name Naaaameee Naaamee				<b>Date:</b>	     12/2/2017
      <p></p>
      <b>Checked by:</b>        Name Naaaameee Naaamee				<b>Date:</b>	     12/2/2017
    </div>
  </mat-card-content>
</div>
